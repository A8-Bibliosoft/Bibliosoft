<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>书籍详情</title>
    <script type="text/javascript" th:src="@{/static/hujs/jquery-2.1.4.min.js}"></script>
    <script type="text/javascript" th:src="@{/static/hujs/bootstrap-3.1.1.min.js}"></script>
    <link th:href="@{/static/hucss/bootstrap.css}" rel="stylesheet" type="text/css" media="all" />
    <style>
        span{

        }
    </style>
</head>
<body>
    <nav class="navbar" role="navigation">
        <div class="container-fluid">
            <ul class="nav navbar-nav">
                <li class="active"><a href="goHomePage">首页</a></li>
                <li><a href="#">所有藏书</a></li>
            </ul>
            <ul class="nav navbar-nav" style="float: right" >
                <li><a th:if="${session.loginname} eq null" href="goLogin" >登录</a></li>
                <li th:if="${session.loginname} ne null">
                    <a href="goReaderInfo"><span th:text="${session.loginname}"></span></a>
                </li>
                <li th:if="${session.loginname} ne null">
                    <a href="goOut">退出登录</a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="container" th:object="${book}">
        <img th:src="${book.bookImg}" alt="" style="width: 100%;height: 700px">
        <br><br>
        <hr>
        <div class="col-md-12">
            <div  class="col-md-6" style="text-align: center">
                <ul class="nav">
                    <li><span>书名:</span><p th:text="${book.bookName}"></p></li>
                    <li><span>作者:</span><p th:text="${book.bookAuthor}"></p></li>
                    <li><span>ISBN:</span><p th:text="${book.bookIsbn}"></p></li>
                    <li><span>价格:</span><p th:text="${book.bookPrice}"></p></li>
                    <li><span>描述:</span><p th:text="${book.bookDesc}"></p></li>
                </ul>
            </div>
            <div class="col-md-6" style="text-align: center">
                <ul class="nav">
                    <li><span>位置:</span><p th:text="${book.bookPosition}"></p></li>
                    <li><span>已借出:</span><p th:text="${bookStatus1}"></p></li>
                    <li><span>已预约:</span><p th:text="${bookStatus4}"></p></li>
                    <li><span>在架上:</span><p th:text="${bookStatus0}"></p></li>
                </ul>
            </div>
        </div>
        <br><br>
        <hr>
        <p style="text-align: center;"><a onclick="bookresult()" class="flip-link btn btn-info" >预约</a></p>
    </div>
    <script language='javascript' th:inline="javascript">
        function bookresult() {
            var code="bookId="+[[${book.bookId}]];
            alert(code);
            $.ajax({
                type: "POST",
                url: "/bookBook",
                data: code,
                async: false,
                cache: false,
                success: function (data) {
                    //alert(data);
                    if ("success" === data) {
                        alert("预约成功！");
                    } else if ("default" === data) {
                        alert("预约失败！书籍库存不足！");
                    } else if ("unlogin" === data) {
                        window.location.href="goLogin";
                    }
                },
                fail: function (data) {
                    alert(data);
                }
            });
        }
    </script>
</body>
</html>